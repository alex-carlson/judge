<!-- This renders to the host machine -->

<!doctype html>
<html>
  <head>
    <title>Server</title>
    <link href='https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>

  <!-- <h1 class="header">Hello World</h1> -->

    <!-- main menu screen -->
    <section class="main-menu">
      <h1>Welcome!</h1>
      <h2><span class="player-count"></span> player(s) connected</h2>
      <p>Waiting for all players to create their avatar...</p>
      <p><span class="readyplayers">0</span>/<span class="player-count">0</span></p>
    </section>

    <section class="roster">
      
    </section>

    <section class="rating">
      
    </section>

    <section class="results">
      
    </section>

    <section class="gameover">
      
    </section>

    <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <script>
      var socket = io();
      var myPlayers;

      // get player count

      socket.on('players', function getPlayers(data){
        data--;
        $('.player-count').html(data);
      })

      socket.on('playerList', function (data){
        myPlayers = data;

        $('.roster').html(renderPlayers(data));

        function renderPlayers(r){
          var p = [];
          for(i = 0; i < r.length; i++){
            p.push('<div class="avatar">'+
            '<img src="'+r[i][0]+'"/>'+
            '<img src="'+r[i][1]+'"/>'+
            '<img src="'+r[i][2]+'"/>'+
            '<img src="'+r[i][3]+'"/>'+
            '<img src="'+r[i][4]+'"/>'+
            '<span>'+r[i][5]+'</span>'+
            '</div>');
          }
          return p;
        }
      })

    </script>
  </body>
</html>